
## 个人数据保护 - “个数保”
###### 版本 V1.0 MVP
###### 作者：张家林 <jerry.zhang.bill@gmail.com>

## 一、系统功能描述
“个数保” 是为个人用户提供个人数据资产管理、个人数据交易以及个人数据委托、托管和其他权利行权、维权服务的平台。
1. 行权工具
2. 维权服务
3. 个人数据资产管理
4. 个人数据资产托管
5. ...陆续推出



### 典型场景描述：

#### 1 数据便携化 data portable 
1. Alice向App1发出个人数据复制请求； -- 《个人信息保护啊法》【复制权】的行权
2. Alice和App1达成个人数据复制协议。 
3. App1将Alice在该App1的个人数据进行归集，分块加密并签名（JD数据块）； -- 按w3可验证凭证数据格式（JSON-LD），复制后的可信数据保障机制。
4. App1通过gRPC或xRPC协议，将2）的数据发给Alice指定的“个数保”账户。  -- 可信安全传输协议
5. “个数保”的Alice的个人区块链的一个合约，执行a)JD数据块写入DFS，并数字签名；b）JD数据块摘要上链； --- Alice个人数据资产治理和管理链。 （一人一链、一户、一node）
6. Alice个人链新区块生成（每个个人链的2个共识节点由系统主链metachain链上的合约管理）。 ---- “个数保”千人千面链+治理主链架构。
-关键点：可信个人数据的复制和数据治理和资产化


#### 2 数据再使用
1. App2和Alice达成协议，在“告知-同意”原则下，Alice同意App2使用Alice存在“个数保”上的App1和AppX的数据；
2. Alice个人链合约执行：a)从DFS读取、加密和传输到一个“可信安全执行环境“容器内；b）调用隐私算法对数据进行处理；c)结果交给App2;
3. 结果完成后，Alice个人链合约执行：a)删除容器；b) 记账； 

#### 3 群体授权
1. “个数保”与某个AppXYZ达成协议，AppXYZ需要对用户的App1的数据进行处理，生产新的服务或付费；
2. “个数保”平台发布告知---，Alice和其他n个用户同意；
3. 重复步骤2。

### 预先基本概念和说明
##### 《个人信息》说明
![image](https://user-images.githubusercontent.com/79302978/141308943-be627a41-ff8f-4468-9ab8-ec33dd810a15.png)

##### 《个人信息保护法》的赋权和权利设置
![image](https://user-images.githubusercontent.com/79302978/141307408-059f5451-9a9f-401c-ba06-0c6f8f9e826b.png)

##### 个人信息保护行权工具和服务示意图
![image](https://user-images.githubusercontent.com/79302978/141307741-71455cb0-478d-4014-8e6d-be5dd4799c41.png)


## 二、系统架构
### 1. 系统架构
系统采用p2p分布式架构，分为四层。
#### 1. 网络（networking）
- 联盟网络 Federated networks
  网络节点之间的消息传递
  网络之间的数据传输
- p2p 组网
- 混合链
-
#### 2. 身份（Identity）
- DID
- 区块链的DID实现
- 密钥管理
- 计算信任
- 失败和报错
-
#### 3. 数据 (data)
- 数据模型： JSON-LD，IPLD
- VCs：可验证凭证

#### 4. 用户界面app(User-face app）

#### 5. 其他辅助系统
- 发现和搜索（discovery and curation）
- moderation
- -  社区驱动的
- -  用户驱动的
- -  体验驱动
- 隐私
- - 用户metadata
- - 私人账户
- - p2p直接消息
- 经济系统
- - 生态经济体系
- - 协议层面
- - 治理层
- 记账/清算
参考示意图如下：
  ![image](https://user-images.githubusercontent.com/79302978/141602801-7da42645-8465-4178-a26e-3b82a4f9f050.png)





## 三、子系统组成部分
### 1. 个人数据资产化协议——datoms

##### DATOMS说明
Datoms采用append-only log加个人区块链混合架构对个人数据进行资产化。
详情请参考[《datoms协议》]。

### 2. 个人数据治理/管理系统 （PDG&M）
- 一人一链： 每个个人都有自己的一个联盟链，联盟链的50%的节点由GSBOS管控；
  联盟链是管理个人数据资产目录的基链。
  用户的个人数据块【datom】被分布式存储，并上链。
- 一人一户： DID分布式身份；
- 一人一node：每个用户的应用都可自主可控；与外部可p2p通讯。
- 个人数据资产子目录（隐私选项）

```markdown
# 个人数据资产目录链：个人数据资产的metadata以及lineage
# 个人数据资产管理系统：对如何使用个人数据权限、隐私保护等设置和授权。最小单位为一个datom。
# 个人数据资产交易管理终端：与数据使用方或其他数据提供方的交易管理。记账、计算合约等。
# 其他管理工具：针对个人数据治理的管理工具箱。例如，如何删除某个App中个人数据的工具。这块严格按网络安全法要求的工具实施。
```

系统采用solid+架构。每个个人都是一个独立的、自治的分布式节点。 每个个人的节点与其他用户形成联盟网络（federat network)。

```markdown
# 核心要点：
## 资产、业务、交易管理自治；
## 数据资产治理符合规范、满足资产化条件；
```
个人数据资产交付给数据处理方的主要方式包括三种：1）端到端；2）安全可信环境计算后交付；3）多方/联邦隐私计算后交付；
系统将上述三种方式，都封装为datube管道的方式（基础设施即服务, IaaS），让用户做选择。

```markdown
# Datube:
## 1) Datube:E2E;
## 2) Datube:vTEE;
## 3) Datube:MPC;
```
Datube作为IaaS为用户提供服务。
Datube的架构示意图如下：

![datube-1](https://user-images.githubusercontent.com/79302978/141884955-53228363-a6c4-4d80-a3aa-831748a0e0dc.jpg)


### 3. “个数保”平台管理系统(GSBOS)
- 用户注册、登记管理系统
- 个人链管理
- 平台主链
- 功能和工具服务
- 记账/清算
- DID解析
- 密钥分发
- 资产主目录

```markdown
# 主链（MetaChain)与个人链（PoChain)的关系。

## 平台主链是整个联盟网络的最高级治理链。
## 每条个人链都hook到主链。hook是三个方法的组合：1）主链拥有个人链的共识节点；2）账户；3）治理合约；4）经济系统。
## 考虑到潜在的巨大个人用户，主链本身也按domian划分为不同的治理区。
```

###### 业务流程描述

```markdown
# 第一部分：一个新的数据资产铸造的流程
1）Alice从App.x中append新的数据。
**一个新的数据块在dataverse中诞生。**
2）一个新的数据块datom诞生，会进行一系列自动化的操作（智能合约）：存储、ID、上链等。这个数据块的Identifier为 hex() ；
**Alice决定这个数据块（或一批）是否可以共享** 
3）Alice对这个数据块进行置权。对数据块中的数据字段进行权限设置、并附带其metadata以及lineage。这样就生产了可验证凭证，从而成为可信数据。也就具备了资产属性。
**一个新的数据资产生成**
4）Alice的PoChain存证这个数据资产：一个NFT-token生成。
5）metachain参与共识。

```
数据资产铸造的过程核心解决的问题是可信数据、可验证凭证以及数据的不可篡改等。

每一个append进来的数据块被铸造为数据资产后，就可以进行交易（被使用）。

```markdown
# 第二部分：数据资产交易
1)XYZ公司向平台发起请求，需要处理在某个Context/Topic的数据，例如过去一年在JD或其他聚合的消费数据；
2）Alice同意后，签署个人数据使用合约（DUC)。 
DUC主要约定：1）交易的数据资产context/topic等熟悉；2）交付的方式-选择那种datube；3)其他合约条款。
**DUC合约执行的主要步骤**
3）DUC合约将ALice对应的Context/topic发给Alice的交易代理；
4）交易代理根据context/topic搜索数据资产，匹配并汇总为资产组合池。对应为一组数据资产{ID}。
5）交易代理将{ID}、pubkey发个DUC合约,合约从ALice的PoChain上获得数据地址；
6）DUC合约从存储系统上读取数据，并用datube进行数据资产交付。
```
数据资产交付是有IaaS完成的。
数据资产交易的一般模型是。

![数据资产交易模型](https://user-images.githubusercontent.com/79302978/141889197-8b7e8c46-2676-47c4-930e-d019ab43a56c.jpg)


### 4. 虚拟安全可信执行容器（VTEE Container）
通过TEE虚拟机、存储以及OS创建一个由合约控制的虚拟安全可信执行容器。
每个VTEE容器根据合约来创建、运行和终止、删除。
```
基本的流程如下：

1）DUC合约根据要求，选择一个数据资产交付的镜像（datube）。
2）DUC根据镜像，创建VTEE容器;
3）DUC/OS指示，数据、对应的代码分别有交易方传输到VTEE；
4）VTEE执行操作；返回结果；并将结果按约定传给数据使用方。
5）DUC终止、删除VTEE。
```
VTEE中的组件主要包括：
- TEE虚拟化环境
- 隐私计算
- 按需容器化部署和管理


### 5. 端到端安全、加密传输管道
- gRPC或xRPC协议的数据端到端传输
- E2E传输协议
- 其他p2p协议

### 6. 安全防护系统
- 数字证书
- 数字钱包


